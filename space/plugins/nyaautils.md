# NyaaUtils 插件指南

NyaaUtils 包含了各类杂项辅助功能，本页面列出该插件在喵窝服务器的详细使用指南。

一切功能如无特殊说明，均为（游戏内）免费使用。

如果需要反馈问题，或者希望参与开发、翻译、整理文档等，请戳 [GitHub 页面](https://github.com/NyaaCat/nyaautils)。

## 装扮相关

### 更改前/后缀

可以修改在游戏内聊天框中显示的名称前后文字，可以带有颜色代码。建议包含可方便认识你的中文昵称，可先在聊天窗口测试完后再输入命令，以免浪费节操。

请勿使用过长或有不良内容或假冒他人之文字！

#### 更改费用

* 更改前缀 198 节操 + 100 经验/次。
* 更改后缀 99 节操 + 100 经验/次。
* 重置（清空）免费。

| 目的          | 命令              |
| ----------- | --------------- |
| 设置/修改前缀     | `/nu prefix [前缀]` |
| 重置（清空）前缀    | `/nu resetprefix` |
| 设置/修改后缀     | `/nu suffix [后缀]` |
| 重置（清空）后缀    | `/nu resetsuffix` |
| 查看允许使用的样式代码 | `/nu format`      |

### 粒子效果

现在，喵窝玩家可以通过 NyaaUtils 为自己、鞘翅和弹射物增加粒子特效。

[详细介绍](https://bbs.nyaa.cat/d/1165-20171113-nyaautils) | [粒子效果预览](https://bbs.nyaa.cat/d/597-elytra)

## 飞行相关

### 飞行动力

* 将燃料放置于背包，展开鞘翅滑翔即可消耗燃料获得飞行动力。玩家将被不断向前推进，从而做到不间断、任意方向角度和特技的飞行。
* 目前可以在 [北风城市政厅](nyaa/realms/northwind?id=北风城市政厅) 自主兑换动力燃料，也可以在各城市/村落商业街或天喵可以使用节操购得动力燃料。
* 因加速判断是在玩家飞行速度低于一定程度（1.0）后自动加速到指定速度（1.6），所以如果做出会造成大量减速的任何动作，将会导致急速消耗燃料。如何利用少量燃料飞行最远距离，以及如何安稳的精准降落，是需要多加练习与研究的技巧！
* 背包中动力燃料数量过少，或者鞘翅耐久过低时会通知玩家尽快降落，以免出现事故。
* 如果不希望消耗燃料，可以使用 `/nu el` 来切换动力模式。

#### 飞行塔弹射器

飞行塔弹射器可以通过命令方块帮助使用鞘翅的玩家在飞行塔开始飞行时，自动张开鞘翅，并立即提升速度到足够飞行的水平。  
部分聚落内的飞行塔，已实装弹射装置。穿戴鞘翅，踩上踏板即可弹射。

## 物品相关

### 物品寄送

可在游戏内将手上的物品或箱子内的全部物品发送给其他玩家。

请注意发送整箱物品必须拥有该箱子的权限，也请勿在任何活动中不当使用此功能！

#### 邮寄费用以及相关命令

| 目的     | 命令                            | 接下来的操作                    |
| ------ | ----------------------------- | ------------------------- |
| 创建邮箱   | `/nu mailbox create`            | 然后右键点击要用来当作收件箱的箱子来创建自己的邮箱 |
| 删除邮箱   | `/nu mailbox remove`            | 删除自己的邮箱                   |
| 查看邮箱信息 | `/nu mailbox info`              | 查看自己的邮箱信息                 |
| 发送手中物品 | `/nu mailbox send [玩家 ID]`      | 发送手中的物品（花费 1 节操）            |
| 发送一箱物品 | `/nu mailbox sendchest [玩家 ID]` | 然后右键点击箱子发送一箱物品（花费 39 节操）    |

### 物品展示

#### 在手中

展示手中的物品：`/nu show`

#### 在展示框中

可以将物品放入展示框中，并使用 NyaaUtils 的展示框保护功能，以保护展示框不被破坏。玩家右键被保护的展示框可以看到物品详情。

* 首先，你需要一个展示框，和要展示的物品。
* 然后，把展示框挂墙上，把物品放展示框里。
* 准星对准展示框，输入 `/nu exhibition set`
* 物品会退还给你，但是展示框中的物品不可取出了。
* 现在右键展示框，应该能在聊天栏中看到被展示的物品；将鼠标伸到物品名称上可以看到物品详情。
* 如果破坏展示框依靠的方块，展示框会掉落，但是物品不会掉落。
* 面对展示框，输入 `/nu exhibition unset`，可以取消物品的展示。
* 展示框物品描述
  被保护的展示框还可以设定一些描述文本，在右键点击时一并显示。只需要对准已经被保护的展示框输入 `/nu exhibition desc <行数> <文本>` 即可。注意行数从 0 开始计数，文本不支持颜色代码。文本中若包含空格，需要用反引号\`\`将文本内容括起来。
* 当前，在展示框中展示**成书**时，右键可以查看成书内容。

### 物品重命名

使用 `/nu rename [名称]` 可以重命名手中的物品，例如 `/nu rename &7&l好喝的水`。

请注意，**重命名是针对单个物品收费**。如果手中持有 64 个物品，执行命令后将收取 **64 x 45 = 2880** 节操。

重命名支持格式代码，请使用 `/nu format` 查看可用的列表；如果需要在物品名称中包含空格，请使用半角反引号 \` 包围。例如 

```
/nu rename `&6柠檬 &4果酱蛋糕`
```

## 战斗/装备相关

### 战利品保护

#### 功能说明

击杀怪物后掉落的物品会自动放到最后击杀的玩家背包内。可选择是否忽略（不会自动放入背包）或拒绝（除潜行外不会拾取）原版物品（没有 lore 的物品；含经验球）。

#### 相关命令

**`/nu lp`  总开关**

-   开启时战利品**按照下面设置的模式**自动进入背包；
-   关闭时插件不生效，掉落物直接掉在地上。

**`/nu lp re`  拒绝原版物品模式**

-   该模式下仅将**带有lore**的物品自动放入背包；
-   **不带有lore**的物品即使走过也不会被拾取；
    -   然而，潜行时可以拾取。

**`/nu lp ig`  忽略原版物品模式**

-   该模式下仅将**带有lore**的物品自动放入背包；
-   走过**不带有lore**的物品也会拾取。

**`/nu lp ac`  包括原版物品模式**

-   **默认模式**，自动将所有物品放入背包。

#### 例外

-   如果背包满，掉落物将会掉在怪物死亡地点。
-   在服务器重启或插件重载后，所有玩家的设置将被**重置为开启保护、默认模式。**

### 经验胶囊

玩家拿着经验瓶即可将自身经验保存在此物品中，并从该物品恢复。

也就是说，经验现在可以存储在经验瓶中~~（只能通过命令恢复，砸掉就没啦）~~ （当前如果不慎打碎瓶子所储存的经验**理论上会返还** ，不过还是不要试为好），并且日后取出或交易。

#### 命令

拿着经验瓶（原版物品

`/nu expcap store [amount]`

比如存储 100 经验  `/nu expcap store 100`，存储身上的所有经验  `/nu expcap store all`

存储后，lore 会改变。从存储的瓶子里恢复：

`/nu expcap restore [amount]`

恢复瓶子里所有经验：

`/nu expcap restore all`

即可。


## 其他功能

### 预编辑告示牌

普通玩家可手持若干个告示牌，键入命令

`/nu se sign [line] [text] `

其中，`line`  指定行数（0\~3）；`text`  指定该行内容。  
执行后，放置该告示牌，直接点击“完成”，可见以此法编辑的文字。

##### 特性

-   内容可使用样式码。此法可最大化利用告示牌空间，**尤其样式码较多的情况下**。
-   在放置前，可无限次预览内容、快速修改某一行内容。
-   无论手持多少告示牌，其均被同时编辑。
-   编辑后，内容会以NBT标签的形式存储，持久保存，直至被放置。  
    -   故此，编辑过的告示牌会与未编辑者分开存放。
    -   告示牌放置并拆除后，将恢复未编辑状态。

#### 席地而坐

主手留空，指向特定方块并右键，若其上为空气，可于其上坐下。  
通过命令  `/nu sit` 开启或关闭该功能。

已知毛毯、床（在白天时）、各种半砖（即台阶）、各种楼梯皆可坐下。  
若在坐上后破坏它们，则人不会离开，而继续维持坐姿，形如“浮空”。~~一键炼成斗宗强者~~

#### 投票

发起投票可用  `/nu vote [主题名称] [选项1] [选项2]`  ；

若当前正进行投票，可用  `/nu vote [选项编号]` 参与投票。

#### 聊天相关

- 公共聊天@某人 `@[id]` 或 `@ [id]`；后者可以避免误触发Telegram或IRC频道中的相同id的人
- 私密聊天 `/msg [id] [消息]` 或 `/m [id] [消息]` ；*后台是看得到的啦……所以不要想着干坏事*


## 目前无法使用的功能

这些功能由于游戏设定调整等原因，目前已经无法在喵窝服务器使用。此处内容仅用作考古依据。

### 高等附魔

使用 NyaaUtils 的附魔功能，可以将物品的附魔属性提升至原版附魔无法达到的更高等级和部分效果。

### 材料修复

对于一些无法使用原版方式修复的物品，可以使用 NyaaUtils 插件提供的材料修复功能来修复。
